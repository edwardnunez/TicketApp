<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: frontend/src/pages/admin/AdminDashboard.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: frontend/src/pages/admin/AdminDashboard.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useEffect, useState } from 'react';
import {
  Layout,
  Typography,
  Button,
  Row,
  Col,
  Table,
  Alert,
  Card,
  Space,
  Statistic,
  Tag,
  Breadcrumb,
  Input,
  Select,
  DatePicker,
  Modal,
  notification
} from 'antd';
import { 
  PlusOutlined, 
  CalendarOutlined, 
  AppstoreOutlined, 
  EnvironmentOutlined, 
  EyeOutlined,
  DashboardOutlined,
  SearchOutlined,
  BarChartOutlined,
  ClockCircleOutlined,
  CheckCircleOutlined,
  StopOutlined,
  FilterOutlined,
  ClearOutlined,
  DeleteOutlined,
  ExclamationCircleOutlined
} from '@ant-design/icons';
import axios from 'axios';
import { Link } from 'react-router-dom';
import dayjs from 'dayjs';

import { COLORS } from "../../components/colorscheme";
import { authenticatedDelete } from '../../utils/api';

const { Content } = Layout;
const { Title, Text } = Typography;
const { Option } = Select;
const { RangePicker } = DatePicker;

/**
 * Admin dashboard component for event management and statistics
 * @returns {JSX.Element} Admin dashboard with event management interface
 */
const AdminDashboard = () => {
  const [events, setEvents] = useState([]);
  const [loading, setLoading] = useState(false);
  const [errorMessage, setErrorMessage] = useState(null);
  
  // Estados para filtros
  const [filters, setFilters] = useState({
    searchText: '',
    category: 'all',
    state: 'all',
    dateRange: null
  });

  // Hook para notificaciones y modales
  const [api, contextHolder] = notification.useNotification();
  const [modal, modalContextHolder] = Modal.useModal();

  const gatewayUrl = process.env.REACT_APP_API_ENDPOINT || "http://localhost:8000";

  useEffect(() => {
    setLoading(true);
    setErrorMessage(null);
    axios.get(gatewayUrl + "/events")
      .then(res => {
        const eventsWithCategories = res.data.map(event => ({
          ...event,
          category: event.category || mapEventTypeToCategory(event.type),
        }));
        setEvents(eventsWithCategories);
        setLoading(false);
      })
      .catch(err => {
        console.error("Error loading events", err);
        setErrorMessage("Failed to load events. Please try again.");
        setLoading(false);
      });
  }, [gatewayUrl]);

  const mapEventTypeToCategory = (type) => {
    const typeMap = {
      'concert': 'Conciertos',
      'football': 'Deportes', 
      'cinema': 'Cine',
      'festival': 'Festivales',
      'theater': 'Teatro'
    };
    return typeMap[type] || 'Evento';
  };

  const getCategoryColor = (categoryName) => {
    switch(categoryName) {
      case "Conciertos": return COLORS?.categories?.conciertos || "#1890ff";
      case "Teatro": return COLORS?.categories?.teatro || "#722ed1";
      case "Deportes": return COLORS?.categories?.deportes || "#52c41a";
      case "Festivales": return COLORS?.categories?.festivales || "#fa8c16";
      case "Cine": return COLORS?.categories?.cine || "#eb2f96";
      default: return COLORS?.primary?.main || "#1890ff";
    }
  };

  const getStateColor = (state) => {
    switch(state) {
      case "activo": return COLORS?.status?.success || "#52c41a";
      case "proximo": return COLORS?.status?.info || "#1890ff";
      case "finalizado": return COLORS?.neutral?.grey500 || "#6B7280";
      case "cancelado": return COLORS?.status?.error || "#ff4d4f";
      default: return COLORS?.neutral?.grey400 || "#9CA3AF";
    }
  };

  const getStateIcon = (state) => {
    switch(state) {
      case "activo": return &lt;CheckCircleOutlined />;
      case "proximo": return &lt;ClockCircleOutlined />;
      case "finalizado": return &lt;StopOutlined />;
      case "cancelado": return &lt;StopOutlined />;
      default: return &lt;ClockCircleOutlined />;
    }
  };

  const getStateLabel = (state) => {
    switch(state) {
      case "activo": return "Activo";
      case "proximo": return "Próximo";
      case "finalizado": return "Finalizado";
      case "cancelado": return "Cancelado";
      default: return "Desconocido";
    }
  };

  // Función para obtener categorías únicas
  const getUniqueCategories = () => {
    const categories = [...new Set(events.map(event => event.category))];
    return categories.sort();
  };

  // Función para obtener estados únicos
  const getUniqueStates = () => {
    const states = [...new Set(events.map(event => event.state))];
    return states.sort();
  };

  // Función principal de filtrado
  const getFilteredEvents = () => {
    return events.filter(event => {
      // Filtro por texto de búsqueda
      const matchesSearch = event.name.toLowerCase().includes(filters.searchText.toLowerCase());
      
      // Filtro por categoría
      const matchesCategory = filters.category === 'all' || event.category === filters.category;
      
      // Filtro por estado
      const matchesState = filters.state === 'all' || event.state === filters.state;
      
      // Filtro por rango de fechas
      let matchesDate = true;
      if (filters.dateRange &amp;&amp; filters.dateRange.length === 2) {
        const eventDate = dayjs(event.date);
        const [startDate, endDate] = filters.dateRange;
        matchesDate = eventDate.isAfter(startDate.startOf('day')) &amp;&amp; eventDate.isBefore(endDate.endOf('day'));
      }
      
      return matchesSearch &amp;&amp; matchesCategory &amp;&amp; matchesState &amp;&amp; matchesDate;
    });
  };

  const filteredEvents = getFilteredEvents();

  // Funciones para manejar cambios en filtros
  const handleSearchChange = (e) => {
    setFilters(prev => ({
      ...prev,
      searchText: e.target.value
    }));
  };

  const handleCategoryChange = (value) => {
    setFilters(prev => ({
      ...prev,
      category: value
    }));
  };

  const handleStateChange = (value) => {
    setFilters(prev => ({
      ...prev,
      state: value
    }));
  };

  const handleDateRangeChange = (dates) => {
    setFilters(prev => ({
      ...prev,
      dateRange: dates
    }));
  };

  const clearAllFilters = () => {
    setFilters({
      searchText: '',
      category: 'all',
      state: 'all',
      dateRange: null
    });
  };

  // Verificar si hay filtros activos
  const hasActiveFilters = () => {
    return filters.searchText !== '' || 
           filters.category !== 'all' || 
           filters.state !== 'all' || 
           filters.dateRange !== null;
  };

  const [currentUserId, setCurrentUserId] = useState(null);
  const username = localStorage.getItem('username');
  useEffect(() => {
    if (!username) return;
    axios.get(`${gatewayUrl}/users/search?username=${username}`)
      .then(res => {
        setCurrentUserId(res.data._id);
      })
      .catch(() => setCurrentUserId(null));
  }, [username, gatewayUrl]);

  const cancelEvent = async (eventId, eventName) => {
    modal.confirm({
      title: '¿Estás seguro de cancelar este evento?',
      icon: &lt;ExclamationCircleOutlined style={{ color: COLORS?.status?.error || "#ff4d4f" }} />,
      content: (
        &lt;div style={{ marginTop: '16px' }}>
          &lt;p style={{ marginBottom: '12px' }}>
            Se cancelará el evento: &lt;strong style={{ color: COLORS?.neutral?.darker || "#262626" }}>{eventName}&lt;/strong>
          &lt;/p>
          &lt;div style={{ 
            padding: '12px', 
            backgroundColor: '#fff2f0', 
            border: '1px solid #ffccc7',
            borderRadius: '6px',
            marginTop: '12px'
          }}>
            &lt;p style={{ 
              color: COLORS?.status?.error || "#ff4d4f", 
              margin: 0,
              fontSize: '14px',
              fontWeight: '500'
            }}>
              ⚠️ También se eliminarán todos los tickets asociados a este evento. Esta acción no se puede deshacer.
            &lt;/p>
          &lt;/div>
        &lt;/div>
      ),
      okText: 'Sí, cancelar',
      okType: 'danger',
      cancelText: 'No',
      okButtonProps: {
        style: {
          backgroundColor: COLORS?.status?.error || "#ff4d4f",
          borderColor: COLORS?.status?.error || "#ff4d4f",
          color: "#ffffff"
        }
      },
      cancelButtonProps: {
        style: {
          borderColor: COLORS?.neutral?.grey400 || "#9CA3AF"
        }
      },
      onOk: async () => {
        try {
          setLoading(true);
          await authenticatedDelete(`/events/${eventId}/cancel`, { data: { adminId: currentUserId } });
          setEvents(prevEvents => prevEvents.map(event => event._id === eventId ? { ...event, state: 'cancelado' } : event));
          api.success({
            message: 'Evento cancelado',
            description: 'El evento ha sido cancelado y todos sus tickets eliminados.',
            placement: 'top',
            duration: 4
          });
        } catch (error) {
          console.error("Error cancelando evento:", error);
          api.error({
            message: 'Error al cancelar',
            description: 'No se pudo cancelar el evento. Por favor, inténtalo de nuevo.',
            placement: 'top',
            duration: 4
          });
        } finally {
          setLoading(false);
        }
      },
    });
  };

  const deleteEvent = async (eventId, eventName) => {
    modal.confirm({
      title: '¿Estás seguro de eliminar este evento de la base de datos?',
      icon: &lt;ExclamationCircleOutlined style={{ color: COLORS?.status?.error || "#ff4d4f" }} />,
      content: (
        &lt;div style={{ marginTop: '16px' }}>
          &lt;p style={{ marginBottom: '12px' }}>
            Se eliminará completamente el evento: &lt;strong style={{ color: COLORS?.neutral?.darker || "#262626" }}>{eventName}&lt;/strong>
          &lt;/p>
          &lt;div style={{ 
            padding: '12px', 
            backgroundColor: '#fff2f0', 
            border: '1px solid #ffccc7',
            borderRadius: '6px',
            marginTop: '12px'
          }}>
            &lt;p style={{ 
              color: COLORS?.status?.error || "#ff4d4f", 
              margin: 0,
              fontSize: '14px',
              fontWeight: '500'
            }}>
              ⚠️ Esta acción eliminará el evento y todos sus tickets asociados de la base de datos. No se puede deshacer.
            &lt;/p>
          &lt;/div>
        &lt;/div>
      ),
      okText: 'Sí, eliminar',
      okType: 'danger',
      cancelText: 'No',
      okButtonProps: {
        style: {
          backgroundColor: COLORS?.status?.error || "#ff4d4f",
          borderColor: COLORS?.status?.error || "#ff4d4f",
          color: "#ffffff"
        }
      },
      cancelButtonProps: {
        style: {
          borderColor: COLORS?.neutral?.grey400 || "#9CA3AF"
        }
      },
      onOk: async () => {
        try {
          setLoading(true);
          await authenticatedDelete(`/events/${eventId}?forceDelete=true`);
          setEvents(prevEvents => prevEvents.filter(event => event._id !== eventId));
          api.success({
            message: 'Evento eliminado',
            description: 'El evento y todos sus tickets han sido eliminados de la base de datos.',
            placement: 'top',
            duration: 4
          });
        } catch (error) {
          console.error("Error eliminando evento:", error);
          api.error({
            message: 'Error al eliminar',
            description: 'No se pudo eliminar el evento. Por favor, inténtalo de nuevo.',
            placement: 'top',
            duration: 4
          });
        } finally {
          setLoading(false);
        }
      },
    });
  };

  const [usernamesById, setUsernamesById] = useState({});

  useEffect(() => {
    if (events.length === 0) return;
    // Obtener ids únicos de creadores
    const creatorIds = Array.from(new Set(events.map(e => e.createdBy)));
    // Solo buscar los que no tengamos ya
    const idsToFetch = creatorIds.filter(id => id &amp;&amp; !usernamesById[id]);
    if (idsToFetch.length === 0) return;
    Promise.all(idsToFetch.map(id =>
      axios.get(`${gatewayUrl}/users/search?userId=${id}`)
        .then(res => ({ 
          id, 
          username: res.data.username
        }))
        .catch(() => ({ id, username: id }))
    )).then(results => {
      const newMap = { ...usernamesById };
      results.forEach(({ id, username }) => { newMap[id] = username; });
      setUsernamesById(newMap);
    });
  // eslint-disable-next-line
  }, [events]);

  const columns = [
    {
      title: 'Nombre del evento',
      dataIndex: 'name',
      key: 'name',
      render: (text, record) => (
        &lt;div style={{ display: 'flex', alignItems: 'center' }}>
          &lt;span style={{ 
            width: '12px', 
            height: '12px', 
            borderRadius: '50%', 
            backgroundColor: getCategoryColor(record.category),
            marginRight: '8px'
          }}>&lt;/span>
          &lt;Text strong>{text}&lt;/Text>
        &lt;/div>
      ),
    },
    {
      title: 'Fecha',
      dataIndex: 'date',
      key: 'date',
      render: (text) => (
        &lt;Space>
          &lt;CalendarOutlined style={{ color: COLORS?.primary?.main || "#1890ff" }} />
          &lt;span>{dayjs(text).format('DD MMM YYYY HH:mm')}&lt;/span>
        &lt;/Space>
      ),
    },
    {
      title: 'Ubicación',
      key: 'location',
      render: (text, record) => (
        &lt;Space>
          &lt;EnvironmentOutlined style={{ color: COLORS?.neutral?.grey600 || "#4B5563" }} />
          &lt;span>{record.location?.name || 'Desconocido'}&lt;/span>
        &lt;/Space>
      ),
    },
    {
      title: 'Categoría',
      dataIndex: 'category',
      key: 'category',
      render: (category) => (
        &lt;Tag color={getCategoryColor(category)} style={{ borderRadius: '4px' }}>
          {category}
        &lt;/Tag>
      ),
    },
    {
      title: 'Estado',
      dataIndex: 'state',
      key: 'state',
      render: (state) => (
        &lt;Tag 
          color={getStateColor(state)} 
          icon={getStateIcon(state)}
          style={{ 
            borderRadius: '4px',
            fontWeight: '500',
            padding: '4px 8px',
            display: 'inline-flex',
            alignItems: 'center',
            gap: '4px'
          }}
        >
          {getStateLabel(state)}
        &lt;/Tag>
      ),
    },
    {
      title: 'Creado por',
      dataIndex: 'createdBy',
      key: 'createdBy',
      render: (createdBy) => (
        &lt;span>{usernamesById[createdBy] || createdBy}&lt;/span>
      ),
    },
    {
      title: 'Acciones',
      key: 'actions',
      render: (text, record) => {
        return (
          &lt;Space>
            &lt;Link to={`/event/${record._id}`}>
              &lt;Button
                type="primary"
                icon={&lt;EyeOutlined />}
                size="small"
                title="Ver detalles del evento"
                aria-label={`Ver detalles del evento ${record.name}`}
                style={{
                  backgroundColor: COLORS?.primary?.main || "#1890ff",
                  borderColor: COLORS?.primary?.main || "#1890ff"
                }}
              >
                Ver
              &lt;/Button>
            &lt;/Link>
            {String(record.createdBy) === String(currentUserId) &amp;&amp; record.state !== 'cancelado' &amp;&amp; (
              &lt;Button
                danger
                icon={&lt;DeleteOutlined />}
                size="small"
                onClick={() => cancelEvent(record._id, record.name)}
                title="Cancelar este evento"
                aria-label={`Cancelar evento ${record.name}`}
                style={{
                  borderColor: COLORS?.status?.error || "#D32F2F",
                  color: COLORS?.status?.error || "#D32F2F"
                }}
              >
                Cancelar
              &lt;/Button>
            )}
            &lt;Button
              danger
              icon={&lt;DeleteOutlined />}
              size="small"
              onClick={() => deleteEvent(record._id, record.name)}
              title="Eliminar evento de la base de datos"
              aria-label={`Eliminar evento ${record.name} de la base de datos`}
              style={{
                borderColor: COLORS?.status?.error || "#842020ff",
                color: COLORS?.status?.error || "#842020ff",
                backgroundColor: '#fff0f0'
              }}
            >
              Eliminar
            &lt;/Button>
          &lt;/Space>
        );
      },
    },
  ];

  // Dashboard stats actualizadas con los eventos filtrados
  const stats = [
    { 
      title: 'Total de eventos', 
      value: filteredEvents.length, 
      icon: &lt;AppstoreOutlined />, 
      color: COLORS?.primary?.main || "#1890ff" 
    },
    { 
      title: 'Eventos activos', 
      value: filteredEvents.filter(e => e.state === 'activo').length, 
      icon: &lt;CheckCircleOutlined />, 
      color: COLORS?.status?.success || "#52c41a"
    },
    { 
      title: 'Próximos eventos', 
      value: filteredEvents.filter(e => e.state === 'proximo').length, 
      icon: &lt;ClockCircleOutlined />, 
      color: COLORS?.status?.info || "#1890ff"
    },
    {
      title: 'Finalizados',
      value: filteredEvents.filter(e => e.state === 'finalizado').length,
      icon: &lt;BarChartOutlined />,
      color: COLORS?.neutral?.grey600 || "#4B5563"
    }
  ];

  const [isMobile, setIsMobile] = useState(false);
  useEffect(() => {
    const handleResize = () => {
      setIsMobile(window.innerWidth &lt; 768);
    };
    handleResize();
    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  return (
    &lt;>
      &lt;style>
        {`
          /* Mejorar contraste del separador en Breadcrumb */
          .ant-breadcrumb-separator {
            color: rgba(0, 0, 0, 0.65) !important;
          }

          /* Mejorar contraste en breadcrumb links */
          .ant-breadcrumb-link {
            color: rgba(0, 0, 0, 0.65) !important;
          }

          /* Mejorar contraste del texto secundario */
          .ant-typography-secondary {
            color: rgba(0, 0, 0, 0.65) !important;
          }

          /* Ocultar completamente el textarea oculto de autosize */
          textarea[aria-hidden="true"][name="hiddenTextarea"] {
            display: none !important;
            visibility: hidden !important;
            position: absolute !important;
            left: -9999px !important;
          }

          /* Mejorar contraste en links de paginación */
          .ant-pagination-item a {
            color: rgba(0, 0, 0, 0.85) !important;
          }

          /* Mejorar contraste en placeholders */
          .ant-select-selection-placeholder,
          .ant-input-placeholder {
            color: rgba(0, 0, 0, 0.65) !important;
          }
        `}
      &lt;/style>
      &lt;Layout style={{ backgroundColor: COLORS.neutral.grey1, minHeight: "100vh" }}>
        {/* Agregamos los context holders para que funcionen las notificaciones y modales */}
        {contextHolder}
        {modalContextHolder}
      
      &lt;Content style={{ padding: isMobile ? "18px 4px" : "40px 20px" }}>
        &lt;div style={{ maxWidth: isMobile ? "100%" : "1200px", margin: "0 auto" }}>
          {/* Header with breadcrumb */}
          &lt;Row justify="space-between" align="middle" style={{ marginBottom: '24px' }}>
            &lt;Col>
              &lt;Breadcrumb 
                items={[
                  { title: 'Inicio' },
                  { title: 'Administración' }
                ]}
                style={{ marginBottom: '8px' }}
              />
              &lt;Title 
                level={2} 
                style={{ 
                  margin: 0, 
                  color: COLORS?.neutral?.darker || "#262626",
                  display: 'flex',
                  alignItems: 'center'
                }}
              >
                &lt;DashboardOutlined style={{ marginRight: '12px', color: COLORS?.primary?.main || "#1890ff" }} />
                Panel de administración
              &lt;/Title>
            &lt;/Col>
            &lt;Col>
              &lt;Space>
                &lt;Button
                  type="primary"
                  size="large"
                  icon={&lt;PlusOutlined />}
                  onClick={() => window.location.href = '/admin/create-event'}
                  style={{ 
                    backgroundColor: COLORS?.primary?.main || "#1890ff",
                    borderColor: COLORS?.primary?.main || "#1890ff",
                    borderRadius: '6px',
                    boxShadow: '0 2px 4px rgba(24, 144, 255, 0.2)'
                  }}
                >
                  Crear nuevo evento
                &lt;/Button>
                &lt;Button
                  type="primary"
                  size="large"
                  icon={&lt;PlusOutlined />}
                  onClick={() => window.location.href = '/admin/create-location'}
                  style={{ 
                    backgroundColor: COLORS?.primary?.main || "#1890ff",
                    borderColor: COLORS?.primary?.main || "#1890ff",
                    borderRadius: '6px',
                    boxShadow: '0 2px 4px rgba(24, 144, 255, 0.2)'
                  }}
                >
                  Crear nueva ubicación
                &lt;/Button>
              &lt;/Space>
            &lt;/Col>
          &lt;/Row>

          {/* Error message */}
          {errorMessage &amp;&amp; (
            &lt;Alert
              message="Error"
              description={errorMessage}
              type="error"
              showIcon
              style={{ marginBottom: 24, borderRadius: '6px' }}
            />
          )}

          {/* Stats cards */}
          &lt;Row gutter={[24, 24]} style={{ marginBottom: '24px' }}>
            {stats.map((stat, index) => (
              &lt;Col xs={24} sm={12} md={6} key={index}>
                &lt;Card 
                  hoverable 
                  style={{ 
                    borderRadius: '8px',
                    boxShadow: '0 1px 2px rgba(0,0,0,0.07), 0 2px 4px rgba(0,0,0,0.07)',
                    height: '100%'
                  }}
                >
                  &lt;Statistic
                    title={
                      &lt;Text style={{ fontSize: '14px', color: COLORS?.neutral?.grey600 || "#4B5563", fontWeight: '500' }}>
                        {stat.title}
                      &lt;/Text>
                    }
                    value={stat.value}
                    valueStyle={{ color: stat.color, fontSize: '28px', fontWeight: 'bold' }}
                    prefix={
                      &lt;span style={{ 
                        backgroundColor: `${stat.color}15`, // 15% opacity
                        width: '40px',
                        height: '40px',
                        borderRadius: '8px',
                        display: 'inline-flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        marginRight: '12px'
                      }}>
                        {React.cloneElement(stat.icon, { style: { fontSize: '20px', color: stat.color } })}
                      &lt;/span>
                    }
                  />
                &lt;/Card>
              &lt;/Col>
            ))}
          &lt;/Row>

          {/* Filtros mejorados */}
          &lt;Card 
            style={{ 
              marginBottom: '24px', 
              borderRadius: '8px',
              boxShadow: '0 1px 2px rgba(0,0,0,0.07)'
            }}
            title={
              &lt;div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
                &lt;span style={{ display: 'flex', alignItems: 'center' }}>
                  &lt;FilterOutlined style={{ marginRight: '8px' }} />
                  Filtros de búsqueda
                &lt;/span>
                {hasActiveFilters() &amp;&amp; (
                  &lt;Button 
                    size="small" 
                    icon={&lt;ClearOutlined />} 
                    onClick={clearAllFilters}
                    style={{ color: COLORS?.status?.error || "#ff4d4f" }}
                  >
                    Limpiar filtros
                  &lt;/Button>
                )}
              &lt;/div>
            }
          >
            &lt;Row gutter={[16, 16]}>
              &lt;Col xs={24} md={6}>
                &lt;Input
                  placeholder="Buscar eventos..."
                  prefix={&lt;SearchOutlined style={{ color: COLORS?.neutral?.grey500 || "#6B7280" }} />}
                  allowClear
                  value={filters.searchText}
                  onChange={handleSearchChange}
                  style={{ borderRadius: '6px' }}
                  size="large"
                  aria-label="Buscar eventos por nombre"
                />
              &lt;/Col>
              &lt;Col xs={24} md={5}>
                &lt;Select
                  placeholder="Categoría"
                  style={{ width: '100%' }}
                  size="large"
                  value={filters.category}
                  onChange={handleCategoryChange}
                  aria-label="Filtrar por categoría"
                >
                  &lt;Option value="all">Todas las categorías&lt;/Option>
                  {getUniqueCategories().map(category => (
                    &lt;Option key={category} value={category} label={category}>
                      {category}
                    &lt;/Option>
                  ))}
                &lt;/Select>
              &lt;/Col>
              &lt;Col xs={24} md={5}>
                &lt;Select
                  placeholder="Estado"
                  style={{ width: '100%' }}
                  size="large"
                  value={filters.state}
                  onChange={handleStateChange}
                  aria-label="Filtrar por estado"
                >
                  &lt;Option value="all">Todos los estados&lt;/Option>
                  {getUniqueStates().map(state => (
                    &lt;Option key={state} value={state} label={getStateLabel(state)}>
                      {getStateLabel(state)}
                    &lt;/Option>
                  ))}
                &lt;/Select>
              &lt;/Col>
              &lt;Col xs={24} md={8}>
                &lt;RangePicker
                  placeholder={['Fecha inicio', 'Fecha fin']}
                  style={{ width: '100%' }}
                  size="large"
                  value={filters.dateRange}
                  onChange={handleDateRangeChange}
                  format="DD/MM/YYYY"
                  aria-label="Filtrar por rango de fechas"
                />
              &lt;/Col>
            &lt;/Row>
            
            {/* Indicador de filtros activos */}
            {hasActiveFilters() &amp;&amp; (
              &lt;div style={{ marginTop: '16px', paddingTop: '16px', borderTop: '1px solid #f0f0f0' }}>
                &lt;Space wrap>
                  &lt;Text type="secondary">Filtros activos:&lt;/Text>
                  {filters.searchText &amp;&amp; (
                    &lt;Tag closable onClose={() => setFilters(prev => ({ ...prev, searchText: '' }))}>
                      Búsqueda: "{filters.searchText}"
                    &lt;/Tag>
                  )}
                  {filters.category !== 'all' &amp;&amp; (
                    &lt;Tag closable onClose={() => setFilters(prev => ({ ...prev, category: 'all' }))}>
                      Categoría: {filters.category}
                    &lt;/Tag>
                  )}
                  {filters.state !== 'all' &amp;&amp; (
                    &lt;Tag closable onClose={() => setFilters(prev => ({ ...prev, state: 'all' }))}>
                      Estado: {getStateLabel(filters.state)}
                    &lt;/Tag>
                  )}
                  {filters.dateRange &amp;&amp; (
                    &lt;Tag closable onClose={() => setFilters(prev => ({ ...prev, dateRange: null }))}>
                      Fechas: {filters.dateRange[0].format('DD/MM/YYYY')} - {filters.dateRange[1].format('DD/MM/YYYY')}
                    &lt;/Tag>
                  )}
                &lt;/Space>
              &lt;/div>
            )}
          &lt;/Card>

          {/* Events table */}
          &lt;Card 
            title={
              &lt;div style={{ display: 'flex', alignItems: 'center' }}>
                &lt;AppstoreOutlined style={{ 
                  color: COLORS?.primary?.main || "#1890ff", 
                  marginRight: '8px', 
                  fontSize: '20px' 
                }} />
                &lt;span style={{ fontSize: '18px', fontWeight: '600' }}>Lista de eventos&lt;/span>
              &lt;/div>
            }
            style={{ 
              borderRadius: '8px',
              boxShadow: '0 1px 2px rgba(0,0,0,0.07), 0 2px 4px rgba(0,0,0,0.07)'
            }}
            extra={
              &lt;Space>
                &lt;Text type="secondary">
                  Mostrando: {filteredEvents.length} de {events.length} eventos
                &lt;/Text>
                {hasActiveFilters() &amp;&amp; (
                  &lt;Tag color="blue">Filtrado&lt;/Tag>
                )}
              &lt;/Space>
            }
          >
            &lt;Table
              columns={columns}
              dataSource={filteredEvents}
              rowKey="_id"
              loading={loading}
              pagination={{
                pageSize: 10,
                showSizeChanger: true,
                showTotal: (total, range) => `${range[0]}-${range[1]} de ${total} elementos`,
                style: {
                  marginTop: '16px'
                }
              }}
              scroll={{ x: 1000 }}
              style={{
                borderRadius: '8px',
                overflow: 'hidden'
              }}
              rowClassName={(record) => {
                // Añadir clase especial para eventos cancelados
                return record.state === 'cancelado' ? 'cancelled-event-row' : '';
              }}
            />
          &lt;/Card>
        &lt;/div>
      &lt;/Content>
      &lt;/Layout>
    &lt;/>
  );
};

export default AdminDashboard;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-components_colorscheme.html">components/colorscheme</a></li><li><a href="module-models_Event.html">models/Event</a></li><li><a href="module-models_Location.html">models/Location</a></li><li><a href="module-models_SeatMap.html">models/SeatMap</a></li><li><a href="module-models_Ticket.html">models/Ticket</a></li><li><a href="module-models_User.html">models/User</a></li><li><a href="module-services_UserService.html">services/UserService</a></li><li><a href="module-utils_api.html">utils/api</a></li><li><a href="module-utils_authSession.html">utils/authSession</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AboutUs">AboutUs</a></li><li><a href="global.html#AdminDashboard">AdminDashboard</a></li><li><a href="global.html#AdminStatistics">AdminStatistics</a></li><li><a href="global.html#App">App</a></li><li><a href="global.html#BlockingViewSwitcher">BlockingViewSwitcher</a></li><li><a href="global.html#EditProfile">EditProfile</a></li><li><a href="global.html#EditableSeatRenderer">EditableSeatRenderer</a></li><li><a href="global.html#ErrorPage">ErrorPage</a></li><li><a href="global.html#EventCreation">EventCreation</a></li><li><a href="global.html#EventDetails">EventDetails</a></li><li><a href="global.html#FramedImage">FramedImage</a></li><li><a href="global.html#GeneralAdmissionRenderer">GeneralAdmissionRenderer</a></li><li><a href="global.html#GenericSeatRenderer">GenericSeatRenderer</a></li><li><a href="global.html#HelpCenter">HelpCenter</a></li><li><a href="global.html#Home">Home</a></li><li><a href="global.html#Login">Login</a></li><li><a href="global.html#ManualBlockingSelection">ManualBlockingSelection</a></li><li><a href="global.html#ManualSeatSelection">ManualSeatSelection</a></li><li><a href="global.html#Profile">Profile</a></li><li><a href="global.html#Register">Register</a></li><li><a href="global.html#RowPricingTable">RowPricingTable</a></li><li><a href="global.html#SeatMapContainer">SeatMapContainer</a></li><li><a href="global.html#SeatRenderer">SeatRenderer</a></li><li><a href="global.html#SeatSelectionViewSwitcher">SeatSelectionViewSwitcher</a></li><li><a href="global.html#SectionShapeRenderer">SectionShapeRenderer</a></li><li><a href="global.html#SelectionTopBar">SelectionTopBar</a></li><li><a href="global.html#TicketPurchase">TicketPurchase</a></li><li><a href="global.html#VenueStageRenderer">VenueStageRenderer</a></li><li><a href="global.html#ZoomControls">ZoomControls</a></li><li><a href="global.html#enviarEmailConfirmacionCompra">enviarEmailConfirmacionCompra</a></li><li><a href="global.html#generateTicketNumber">generateTicketNumber</a></li><li><a href="global.html#generateToken">generateToken</a></li><li><a href="global.html#generateValidationCode">generateValidationCode</a></li><li><a href="global.html#returnError">returnError</a></li><li><a href="global.html#tokens">tokens</a></li><li><a href="global.html#transporter">transporter</a></li><li><a href="global.html#useAdvancedZoomPan">useAdvancedZoomPan</a></li><li><a href="global.html#useDeviceDetection">useDeviceDetection</a></li><li><a href="global.html#useUserRole">useUserRole</a></li><li><a href="global.html#verifyAdmin">verifyAdmin</a></li><li><a href="global.html#verifyAuthenticated">verifyAuthenticated</a></li><li><a href="global.html#verifyOwnership">verifyOwnership</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Tue Nov 11 2025 23:18:34 GMT+0100 (hora estándar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
